(this.webpackJsonpqrmenu_frontend=this.webpackJsonpqrmenu_frontend||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var c,a,r,s,i,o,j,l,u,d,b,O=n(1),h=n.n(O),x=n(19),m=n.n(x),p=n(25),f=n(10),v=n(24),g=n(9),y=n.n(g),k=n(11),w=n(8),C=function(e,t){var n=t.data,c=void 0===n?null:n,a=t.token,r=void 0===a?null:a,s=t.method,i=void 0===s?"GET":s;return fetch(e,{method:i,headers:{Authorization:r?"Token ".concat(r):"","Content-Type":"application/json"},body:"GET"!==i&&"DELETE"!==i?JSON.stringify(c):null}).then((function(e){return e.ok?"DELETE"===i||e.json():e.json().then((function(t){if(400===e.status){var n=Object.keys(t).map((function(e){return"".concat(t[e].join(" "))}));throw new Error(n.join(" "))}throw new Error(JSON.stringify(t))})).catch((function(t){if("SyntaxError"===t.name)throw new Error(e.statusText);throw new Error(t)}))})).catch((function(e){Object(v.b)(e.message,{type:"error"})}))},N=function(e,t){return C("/auth/token/login",{data:{username:e,password:t},method:"POST"})},S=function(e,t){return C("/auth/users/",{data:{username:e,password:t},method:"POST"})},E=function(e,t){return C("/api/places/".concat(e),{token:t})},_=function(e,t,n){return C("/api/orders/".concat(e),{data:t,token:n,method:"PATCH"})},z=n(2),P=Object(O.createContext)(),T=function(e){var t=e.children,n=Object(O.useState)(localStorage.getItem("qr_token")),c=Object(w.a)(n,2),a=c[0],r=c[1],s=Object(O.useState)(!1),i=Object(w.a)(s,2),o=i[0],j=i[1],l={token:a,loading:o,signIn:function(){var e=Object(k.a)(y.a.mark((function e(t,n,c){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,N(t,n);case 3:(a=e.sent)&&a.auth_token&&(localStorage.setItem("qr_token",a.auth_token),r(a.auth_token),c()),j(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),signOut:function(){localStorage.removeItem("qr_token"),r("")},register:function(){var e=Object(k.a)(y.a.mark((function e(t,n,c){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,S(t,n);case 3:(a=e.sent)&&a.id&&c(),j(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()};return Object(z.jsx)(P.Provider,{value:l,children:t})},L=P,q=n(109),I=n(108),D=n(110),A=n(70),G=n(111),R=n(112),M=n(118),H=n(117),U=function(e){var t=e.children,n=Object(f.g)(),c=Object(O.useContext)(L);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(M.a,{bg:"light",variant:"light",className:"mb-4",children:[Object(z.jsx)(M.a.Brand,{href:"/",children:"QR MENU"}),Object(z.jsx)(H.a,{children:Object(z.jsx)(H.a.Link,{onClick:function(){n.push("/places")},children:"Places"})}),Object(z.jsx)(H.a,{className:"flex-grow-1 justify-content-end",children:c.token?Object(z.jsx)(H.a.Link,{onClick:function(){c.signOut(),n.push("/login")},children:"Logout"}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(H.a.Link,{onClick:function(){n.replace("/login")},children:"Login"}),Object(z.jsx)(H.a.Link,{onClick:function(){n.replace("/register")},children:"Register"})]})})]}),Object(z.jsx)(I.a,{children:t})]})},B=function(){return Object(z.jsx)(U,{children:Object(z.jsx)(q.a,{className:"bg-light",children:Object(z.jsx)(I.a,{children:Object(z.jsxs)(D.a,{children:[Object(z.jsxs)(A.a,{md:6,className:"my-auto",children:[Object(z.jsx)("h1",{children:Object(z.jsx)("strong",{children:"QR Menu"})}),Object(z.jsx)("h5",{className:"mt-4 mb-4",children:"A smart way to share you menu in a QR Code with your customers"}),Object(z.jsx)("br",{}),Object(z.jsx)(G.a,{href:"/places",variant:"standard",size:"lg",children:"Create you menu"})]}),Object(z.jsx)(A.a,{md:6,children:Object(z.jsx)(R.a,{rounded:!0,fluid:!0,src:"https://res.cloudinary.com/snazzycave/image/upload/v1635192665/qr_menu/restog_m9fjmc.gif"})})]})})})})},F=n(120),J=n(116),Q=n(113),X=function(){var e=Object(O.useState)(""),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(O.useState)(""),r=Object(w.a)(a,2),s=r[0],i=r[1],o=Object(f.g)(),j=Object(O.useContext)(L);return Object(O.useEffect)((function(){j.token&&o.replace("/places")}),[o,j.token]),Object(z.jsx)(U,{children:Object(z.jsx)(D.a,{className:"justify-content-center",children:Object(z.jsx)(A.a,{lg:6,md:8,children:Object(z.jsx)(F.a,{children:Object(z.jsxs)(F.a.Body,{children:[Object(z.jsx)("h3",{className:"text-center",children:Object(z.jsx)("strong",{children:"LOGIN"})}),Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Username"}),Object(z.jsx)(J.a.Control,{type:"text",placeholder:"Enter Username",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Password"}),Object(z.jsx)(J.a.Control,{type:"password",placeholder:"Enter Password",value:s,onChange:function(e){return i(e.target.value)}})]}),Object(z.jsx)(G.a,{variant:"standard",block:!0,onClick:function(){j.signIn(n,s,(function(){return o.replace("/places")}))},disabled:j.loading,children:j.login?Object(z.jsx)(Q.a,{variant:"standard",as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Login"})]})})})})})},Y=n(42),K=n(12),V=n(13),Z=n(76),W=n(14),$=n(74),ee=n(32),te=W.a.div(c||(c=Object(V.a)(["\n  border-radius: 5px;\n  background-color: white;\n  margin-bottom: 30px;\n  box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.1);\n  display: flex;\n  opacity: ",";\n\n  > div:first-child {\n    width: 40%;\n    border-top-left-radius: 5px;\n    border-bottom-left-radius: 5px;\n    background-size: cover;\n  }\n  > div:last-child {\n    padding: 15px 20px;\n    min-height: 150px;\n  }\n"])),(function(e){return e.active?1:.6})),ne=function(e){var t=e.item,n=e.onEdit,c=e.onRemove,a=e.onOrder;return Object(z.jsxs)(te,{active:t.is_available,children:[Object(z.jsx)(A.a,{xs:5,style:{backgroundImage:"url(".concat(t.image,")")}}),Object(z.jsxs)(A.a,{xs:7,className:"d-flex flex-column w-100 justify-content-between",children:[Object(z.jsxs)("div",{children:[Object(z.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[Object(z.jsx)("h4",{className:"mb-0",children:Object(z.jsx)("strong",{children:t.name})}),Object(z.jsxs)("div",{children:[n?Object(z.jsx)(G.a,{variant:"link",onClick:n,children:Object(z.jsx)($.a,{size:20})}):null,c?Object(z.jsx)(G.a,{variant:"link",onClick:c,children:Object(z.jsx)(ee.a,{size:20,color:"red"})}):null]})]}),Object(z.jsx)("p",{className:"mb-4 ",children:t.description})]}),Object(z.jsxs)("div",{className:"d-flex align-items-end justify-content-between",children:[Object(z.jsxs)("div",{children:[Object(z.jsx)("h5",{className:" text-standard",children:Object(z.jsxs)("strong",{children:["\u20b9 ",t.price]})}),a?Object(z.jsx)(G.a,{variant:"standard",className:"mt-2",size:"sm",onClick:function(){return a(t)},children:t.quantity?"Add one more (".concat(t.quantity,")"):"Add to cart"}):null]}),t.is_available?"":Object(z.jsx)("small",{className:"text-secondary",children:"Not Available"})]})]})]})},ce=W.a.div(a||(a=Object(V.a)(["\n  text-align: center;\n  img {\n    border-radius: 5px;\n    margin-bottom: 20px;\n  }\n"]))),ae=function(e){var t,n=e.place,c=e.shoppingCart,a=e.onOrder;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(ce,{children:[Object(z.jsx)("img",{src:n.image,width:100,height:100,alt:n.name}),Object(z.jsx)("h3",{children:Object(z.jsx)("strong",{children:n.name})})]}),null===n||void 0===n||null===(t=n.categories)||void 0===t?void 0:t.filter((function(e){return e.menu_items.filter((function(e){return e.is_available})).length})).map((function(e){return Object(z.jsxs)("div",{className:"mt-5",children:[Object(z.jsx)("h4",{className:"mb-4",children:Object(z.jsx)("strong",{children:e.name})}),e.menu_items.filter((function(e){return e.is_available})).map((function(e){var t;return Object(z.jsx)(ne,{item:Object(K.a)(Object(K.a)({},e),{},{quantity:null===(t=c[e.id])||void 0===t?void 0:t.quantity}),onOrder:a},e.id)}))]},e.id)}))]})},re=Object(W.a)(G.a)(r||(r=Object(V.a)(["\n  width: 30px;\n  height: 30px;\n  margin: 0 10px;\n  font-size: 20px;\n  line-height: 18px;\n"]))),se=n(75),ie=n(37),oe=function(e){var t=e.amount,n=e.items,c=e.onDone,a=Object(O.useState)(!1),r=Object(w.a)(a,2),s=r[0],i=r[1],o=Object(ie.useStripe)(),j=Object(ie.useElements)(),l=Object(O.useContext)(L),u=Object(f.h)(),d=function(){var e=Object(k.a)(y.a.mark((function e(a){var r,s,d,b;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,o.createPaymentMethod({type:"card",card:j.getElement(ie.CardElement)});case 3:if(r=e.sent,s=r.error,d=r.paymentMethod,s){e.next=12;break}return i(!0),e.next=10,O={payment_method:d,amount:t,place:u.id,table:u.table,detail:n},h=l.token,C("/api/create_payment_intent/",{data:O,token:h,method:"POST"});case 10:(null===(b=e.sent)||void 0===b?void 0:b.success)?(Object(v.b)("Your order #".concat(b.order," is getting ready"),{type:"success"}),c(),i(!1)):(null===b||void 0===b?void 0:b.error)&&(Object(v.b)(b.error,{type:"error"}),i(!1));case 12:case"end":return e.stop()}var O,h}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)(J.a,{onSubmit:d,children:[Object(z.jsx)(ie.CardElement,{options:{hidePostalCode:!0}}),Object(z.jsx)(G.a,{variant:"standard",className:"mt-4",type:"submit",block:!0,disabled:s,children:s?"Processing payment...":"Make Payment"})]})},je=Object(se.a)("pk_test_51JpysQSAmUXaSHPXv1qvipT3Zf08zM0QrfqR73xUN7LEJEx8SFwFuEmmxuQga7uxL2eKbTTVGid0h26oyIiFPvG500aP99DlRO"),le=function(e){return Object(z.jsx)(ie.Elements,{stripe:je,children:Object(z.jsx)(oe,Object(K.a)({},e))})},ue=function(e){var t=e.items,n=e.onAdd,c=e.onRemove,a=e.onPaymentDone,r=Object(O.useMemo)((function(){return t.map((function(e){return e.quantity*e.price})).reduce((function(e,t){return e+t}),0)}),[t]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h3",{className:"text-center mb-4",children:Object(z.jsx)("strong",{children:"Your order"})}),Object(z.jsx)(F.a,{children:Object(z.jsxs)(F.a.Body,{children:[t.map((function(e){return Object(z.jsxs)("div",{className:"d-flex mb-4 align-items-center",children:[Object(z.jsxs)("div",{className:"flex-grow-1",children:[Object(z.jsx)("p",{className:"mb-0",children:Object(z.jsx)("strong",{children:e.name})}),Object(z.jsxs)("span",{children:["\u20b9 ",e.price]})]}),Object(z.jsxs)("div",{className:"d-flex mb-4 align-items-center",children:[Object(z.jsx)(re,{variant:"lightgray",size:"sm",onClick:function(){return c(e)},children:"-"}),Object(z.jsx)("span",{children:e.quantity}),Object(z.jsx)(re,{variant:"lightgray",size:"sm",onClick:function(){return n(e)},children:"+"})]})]},e.id)})),Object(z.jsx)("hr",{}),Object(z.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(z.jsx)("h5",{children:Object(z.jsx)("strong",{children:"Total"})}),Object(z.jsx)("h5",{children:Object(z.jsxs)("strong",{children:["\u20b9 ",r]})})]}),Object(z.jsx)("hr",{className:"mb-4"}),Object(z.jsx)(le,{amount:r,items:t,onDone:a})]})})]})},de=Object(W.a)(G.a)(s||(s=Object(V.a)(["\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  border-radius: 50%;\n  box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.2);\n  width: 60px;\n  height: 60px;\n"]))),be=function(){var e=Object(O.useState)({}),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(O.useState)({}),r=Object(w.a)(a,2),s=r[0],i=r[1],o=Object(O.useState)(!1),j=Object(w.a)(o,2),l=j[0],u=j[1],d=Object(f.h)(),b=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(d.id);case 2:(t=e.sent)&&c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){var t;i(Object(K.a)(Object(K.a)({},s),{},Object(Y.a)({},e.id,Object(K.a)(Object(K.a)({},e),{},{quantity:((null===(t=s[e.id])||void 0===t?void 0:t.quantity)||0)+1}))))},x=Object(O.useMemo)((function(){return Object.keys(s).map((function(e){return s[e].quantity})).reduce((function(e,t){return e+t}),0)}),[s]);return Object(O.useEffect)((function(){b()}),[]),Object(z.jsxs)(I.a,{className:"mt-5 mb-5",children:[Object(z.jsx)(D.a,{className:"justify-content-center",children:Object(z.jsx)(A.a,{lg:8,children:l?Object(z.jsx)(ue,{items:Object.keys(s).map((function(e){return s[e]})).filter((function(e){return e.quantity>0})),onAdd:h,onRemove:function(e){var t;1===x&&u(!1),i(Object(K.a)(Object(K.a)({},s),{},Object(Y.a)({},e.id,Object(K.a)(Object(K.a)({},e),{},{quantity:((null===(t=s[e.id])||void 0===t?void 0:t.quantity)||0)-1}))))},onPaymentDone:function(){i({}),u(!1)}}):Object(z.jsx)(ae,{place:n,shoppingCart:s,onOrder:h})})}),x?Object(z.jsx)(de,{variant:"standard",onClick:function(){return u(!l)},children:l?Object(z.jsx)(Z.a,{size:25}):x}):null]})},Oe=n(53),he=function(e){var t=e.order,n=e.onComplete;return Object(z.jsxs)(F.a,{className:"mb-3",children:[Object(z.jsxs)(F.a.Header,{className:"d-flex justify-content-between",children:[Object(z.jsx)("span",{children:"Order ".concat(t.id," - Table #").concat(t.table)}),Object(z.jsx)("span",{children:Object(z.jsxs)("strong",{children:["\u20b9 ",t.amount]})})]}),Object(z.jsxs)(F.a.Body,{className:"d-flex justify-content-between",children:[Object(z.jsx)("div",{children:JSON.parse(t.detail).map((function(e){return Object(z.jsxs)("div",{className:"mb-2",children:[Object(z.jsxs)("span",{children:["x",e.quantity]}),Object(z.jsx)("img",{src:e.image,width:30,height:30,alt:e.name,style:{borderRadius:3,margin:"0 10px"}}),Object(z.jsx)("span",{children:e.name})]})}))}),Object(z.jsx)("div",{children:n?Object(z.jsx)(G.a,{variant:"standard",size:"md",onClick:n,children:"Done"}):null})]})]})},xe=function(){var e,t=Object(O.useState)([]),n=Object(w.a)(t,2),c=n[0],a=n[1],r=Object(f.h)(),s=Object(f.g)(),i=Object(O.useContext)(L),o=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=r.id,c=i.token,C("/api/orders/?place=".concat(n),{token:c});case 2:(t=e.sent)&&a(t);case 4:case"end":return e.stop()}var n,c}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,{status:"completed"},i.token);case 2:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.useEffect)((function(){o();var e=setInterval((function(){o()}),2e3);return function(){return clearInterval(e)}}),[]),Object(z.jsxs)(U,{children:[Object(z.jsxs)("div",{className:"d-flex align-item-center mb-4",children:[Object(z.jsx)(G.a,{variant:"link",onClick:function(){return s.push("/places/".concat(r.id))},children:Object(z.jsx)(Oe.a,{size:25,color:"black"})}),Object(z.jsx)("h3",{className:"mb-0 ml-2 mr-2",children:"My Orders"})]}),Object(z.jsx)(D.a,{className:"justify-content-center",children:null===c||void 0===c||null===(e=c.filter((function(e){return"processing"===e.status})))||void 0===e?void 0:e.map((function(e){return Object(z.jsx)(A.a,{lg:8,children:Object(z.jsx)(he,{order:e,onComplete:function(){return j(e.id)}})},e.id)}))})]})},me=n(54),pe=n(115),fe=n(114),ve=n(119),ge=n(79),ye=W.a.div(i||(i=Object(V.a)(["\n  border: 1px dashed #ced4d9;\n  border-radius: 5px;\n  color: #6c575d;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 142px;\n  img {\n    height: 140px;\n  }\n"]))),ke=function(e){var t=e.value,n=e.onChange,c=Object(O.useState)(!1),a=Object(w.a)(c,2),r=a[0],s=a[1],i=Object(O.useCallback)((function(e){s(!0),function(e){var t=new FormData;return t.append("file",e),t.append("upload_preset","qr_menu"),fetch("https://api.cloudinary.com/v1_1/snazzycave/image/upload",{method:"POST",body:t}).then((function(e){return e.json()}))}(e[0]).then((function(e){return n(e.url)})).finally((function(){return s(!1)}))}),[]),o=Object(ge.a)({onDrop:i,multiple:!1,accept:"image/*"}),j=o.getRootProps,l=o.getInputProps;return Object(z.jsxs)(ye,Object(K.a)(Object(K.a)({},j()),{},{children:[Object(z.jsx)("input",Object(K.a)({},l())),t?Object(z.jsx)("img",{src:t,alt:""}):r?Object(z.jsx)(Q.a,{variant:"standard",animation:"border",role:"status"}):Object(z.jsx)("span",{children:"Drop image here or click to select file"})]}))},we=function(e){var t,n=e.place,c=e.onDone,a=e.item,r=void 0===a?{}:a,s=Object(O.useState)(""),i=Object(w.a)(s,2),o=i[0],j=i[1],l=Object(O.useState)(!1),u=Object(w.a)(l,2),d=u[0],b=u[1],h=Object(O.useState)(r.category),x=Object(w.a)(h,2),m=x[0],p=x[1],f=Object(O.useState)(r.name),g=Object(w.a)(f,2),N=g[0],S=g[1],E=Object(O.useState)(r.price||0),_=Object(w.a)(E,2),P=_[0],T=_[1],q=Object(O.useState)(r.description),I=Object(w.a)(q,2),D=I[0],A=I[1],R=Object(O.useState)(r.image),M=Object(w.a)(R,2),H=M[0],U=M[1],B=Object(O.useState)(void 0===r.is_available||!!r.is_available),F=Object(w.a)(B,2),Q=F[0],X=F[1],Y=Object(O.useRef)(null),K=Object(O.useContext)(L),V=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a={name:o,place:n.id},r=K.token,C("/api/categories/",{data:a,token:r,method:"POST"});case 2:(t=e.sent)&&(Object(v.b)("Category ".concat(t.name," was created"),{type:"success"}),p(t.id),j(""),b(!1),c());case 4:case"end":return e.stop()}var a,r}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a={place:n.id,category:m,name:N,price:P,description:D,image:H,is_available:Q},r=K.token,C("/api/menu_items/",{data:a,token:r,method:"POST"});case 2:(t=e.sent)&&(Object(v.b)("Menu item ".concat(t.name," was created succesfully"),{type:"success"}),p(""),S(""),T(""),A(""),U(""),X(!0),c());case 4:case"end":return e.stop()}var a,r}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=r.id,s={place:n.id,category:m,name:N,price:P,description:D,image:H,is_available:Q},i=K.token,C("/api/menu_items/".concat(a),{data:s,token:i,method:"PATCH"});case 2:(t=e.sent)&&(Object(v.b)("Menu item ".concat(t.name," updated successfully"),{type:"success"}),p(""),S(""),T(""),A(""),U(""),X(!0),c());case 4:case"end":return e.stop()}var a,s,i}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Category"}),Object(z.jsxs)("div",{className:"d-flex align-items-center",children:[Object(z.jsxs)(J.a.Control,{as:"select",value:m,onChange:function(e){return p(e.target.value)},children:[Object(z.jsx)("option",{selected:!0,children:"Select Category"}),null===n||void 0===n||null===(t=n.categories)||void 0===t?void 0:t.map((function(e){return Object(z.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(z.jsx)(G.a,{ref:Y,variant:"link",onClick:function(){return b(!0)},children:Object(z.jsx)(me.b,{size:25})}),Object(z.jsx)(fe.a,{show:d,target:Y.current,placement:"bottom",rootClose:!0,onHide:function(){return b(!1)},children:Object(z.jsxs)(ve.a,{id:"popover-contained",children:[Object(z.jsx)(ve.a.Title,{as:"h3",children:"Category"}),Object(z.jsxs)(ve.a.Content,{children:[Object(z.jsx)(J.a.Group,{children:Object(z.jsx)(J.a.Control,{type:"text",placeholder:"Category name",value:o,onChange:function(e){return j(e.target.value)}})}),Object(z.jsx)(G.a,{block:!0,variant:"standard",onClick:V,children:"Add Category"})]})]})})]})]}),Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Name"}),Object(z.jsx)(J.a.Control,{type:"text",placeholder:"Enter name",value:N,onChange:function(e){return S(e.target.value)}})]}),Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Price"}),Object(z.jsx)(J.a.Control,{type:"number",placeholder:"Enter price",value:P,onChange:function(e){return T(e.target.value)}})]}),Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Description"}),Object(z.jsx)(J.a.Control,{type:"text",placeholder:"Enter description",value:D,onChange:function(e){return A(e.target.value)}})]}),Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Image"}),Object(z.jsx)(ke,{value:H,onChange:U})]}),Object(z.jsx)(J.a.Group,{children:Object(z.jsx)(J.a.Check,{type:"checkbox",label:"Is Available",onChange:function(e){return X(e.target.checked)},checked:Q})}),Object(z.jsx)(G.a,{block:!0,variant:"standard",onClick:r.id?W:Z,children:r.id?"Update Menu Item":"+ Add Menu Item"})]})},Ce=n(63),Ne=n.n(Ce),Se=n(78),Ee=W.a.div(o||(o=Object(V.a)(["\n  position: relative;\n"]))),_e=W.a.div(j||(j=Object(V.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  background-color: rgba(255, 255, 255, 0.5);\n\n  > div {\n    margin: auto;\n  }\n"]))),ze=W.a.div(l||(l=Object(V.a)(["\n  text-align: center;\n  margin-top: 200px;\n  h1 {\n    font-size: 100px;\n    font-weight: bold;\n    margin-bottom: 50px;\n  }\n\n  h2 {\n    font-size: 60px;\n    margin-bottom: 100px;\n  }\n"]))),Pe=function(e){var t=e.table,n=e.placeId,c=Object(O.useRef)(),a="".concat(window.location.origin,"/menu/").concat(n,"/").concat(t),r=Object(Se.useReactToPrint)({content:function(){return c.current}});return Object(z.jsxs)(Ee,{children:[Object(z.jsx)(Ne.a,{value:a,size:200}),Object(z.jsx)(_e,{children:Object(z.jsxs)("div",{className:"d-flex",children:[Object(z.jsx)(G.a,{variant:"standard",onClick:r,className:"mr-2",children:"Print table ".concat(t)}),Object(z.jsx)(G.a,{variant:"standard",href:"/menu/".concat(n,"/").concat(t),className:"mr-2",target:"_blank",children:Object(z.jsx)(ee.b,{size:25})})]})}),Object(z.jsx)("div",{style:{display:"none"},children:Object(z.jsxs)(ze,{ref:c,children:[Object(z.jsxs)("h1",{children:["Table ",t]}),Object(z.jsx)("h2",{children:"Scan for menu"}),Object(z.jsx)(Ne.a,{value:a,size:500})]})})]})},Te=function(e){var t=e.show,n=e.onHide,c=e.place,a=e.onUpdatePlace;return Object(z.jsx)(pe.a,{show:t,onHide:n,size:"lg",centered:!0,children:Object(z.jsx)(pe.a.Body,{className:"text-center pt-4",children:Object(z.jsxs)(I.a,{children:[Object(z.jsx)("h3",{children:"QR Code for tables"}),Object(z.jsxs)("div",{className:"d-flex align-items-center mt-4 mb-4",children:[Object(z.jsxs)("h5",{className:"mb-0 mr-2",children:["Total tables : ",Object(z.jsx)("strong",{children:c.number_of_tables})]}),Object(z.jsx)(re,{variant:"lightgray",size:"sm",onClick:function(){return a(c.number_of_tables-1)},children:"-"}),Object(z.jsx)(re,{variant:"lightgray",size:"sm",onClick:function(){return a(c.number_of_tables+1)},children:"+"})]}),Object(z.jsx)(D.a,{children:Array.from({length:c.number_of_tables},(function(e,t){return t+1})).map((function(e){return Object(z.jsx)(A.a,{lg:4,md:6,className:"mb-4",children:Object(z.jsx)(Pe,{table:e,placeId:c.id})},e)}))})]})})})},Le=W.a.div(u||(u=Object(V.a)(["\n  background-color: white;\n  padding: 20px;\n  border-radius: 5px;\n  box-shadow: 1px 1px 10px rgba(0, 0, 0, 0, 0.05);\n"]))),qe=function(){var e,t=Object(O.useState)({}),n=Object(w.a)(t,2),c=n[0],a=n[1],r=Object(O.useState)(!1),s=Object(w.a)(r,2),i=s[0],o=s[1],j=Object(O.useState)(!1),l=Object(w.a)(j,2),u=l[0],d=l[1],b=Object(O.useState)(null),h=Object(w.a)(b,2),x=h[0],m=h[1],p=Object(O.useContext)(L),v=Object(f.h)(),g=Object(f.g)(),N=function(){return g.push("/places")},S=function(){return o(!1)},_=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(v.id,p.token);case 2:(t=e.sent)&&a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e){window.confirm("Are you sure?")&&function(e,t){return C("/api/categories/".concat(e),{token:t,method:"DELETE"})}(e,p.token).then(_)},T=function(e){window.confirm("Are you sure?")&&function(e,t){return C("/api/menu_items/".concat(e),{token:t,method:"DELETE"})}(e,p.token).then(_)},q=function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=c.id,s={number_of_tables:t},i=p.token,C("/api/places/".concat(r),{data:s,token:i,method:"PATCH"});case 2:(n=e.sent)&&a(n);case 4:case"end":return e.stop()}var r,s,i}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.useEffect)((function(){_()}),[]),Object(z.jsxs)(U,{children:[Object(z.jsxs)(D.a,{children:[Object(z.jsx)(A.a,{lg:12,children:Object(z.jsxs)("div",{className:"mb-4",children:[Object(z.jsxs)("div",{className:"d-flex justify-content-between mb-4 align-items-center",children:[Object(z.jsx)(G.a,{variant:"link",onClick:N,children:Object(z.jsx)(Oe.a,{size:25,color:"black"})}),Object(z.jsx)("h3",{className:"mb-0 ml-2 mr-2",children:c.name}),Object(z.jsx)(G.a,{variant:!0,onClick:function(){var e,t;window.confirm("Are you sure?")&&(e=v.id,t=p.token,C("/api/places/".concat(e),{token:t,method:"DELETE"})).then(N)},children:Object(z.jsx)(ee.a,{size:25,color:"red"})})]}),Object(z.jsx)(G.a,{variant:"link",onClick:function(){return d(!0)},children:Object(z.jsx)(ee.c,{size:25})}),Object(z.jsx)(G.a,{variant:"link",href:"/places/".concat(v.id,"/orders"),children:Object(z.jsx)(me.a,{size:25})})]})}),Object(z.jsx)(A.a,{md:4,children:Object(z.jsx)(Le,{children:Object(z.jsx)(we,{place:c,onDone:_})})}),Object(z.jsx)(A.a,{md:8,children:null===c||void 0===c||null===(e=c.categories)||void 0===e?void 0:e.map((function(e){return Object(z.jsxs)("div",{className:"mb-5",children:[Object(z.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(z.jsx)("h4",{className:"mr-2 mb-0",children:Object(z.jsx)("strong",{children:e.name})}),Object(z.jsx)(G.a,{variant:!0,onClick:function(){return P(e.id)},children:Object(z.jsx)(ee.a,{size:25,color:"red"})})]}),e.menu_items.map((function(e){return Object(z.jsx)(ne,{item:e,onEdit:function(){m(e),o(!0)},onRemove:function(){return T(e.id)}},e.id)}))]},e.id)}))})]}),Object(z.jsx)(pe.a,{show:i,onHide:S,centered:!0,children:Object(z.jsxs)(pe.a.Body,{children:[Object(z.jsx)("h4",{className:"text-center",children:"Menu Item"}),Object(z.jsx)(we,{place:c,onDone:function(){_(),S()},item:x})]})}),Object(z.jsx)(Te,{show:u,onHide:function(){return d(!1)},place:c,onUpdatePlace:q})]})},Ie=function(e){var t=e.onDone,n=Object(O.useState)(""),c=Object(w.a)(n,2),a=c[0],r=c[1],s=Object(O.useState)(""),i=Object(w.a)(s,2),o=i[0],j=i[1],l=Object(O.useContext)(L),u=function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n={name:a,image:o},c=l.token,C("/api/places/",{data:n,token:c,method:"POST"});case 2:e.sent&&(r(""),j(""),t());case 4:case"end":return e.stop()}var n,c}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsx)("h4",{className:"text-center",children:"Place"}),Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Name"}),Object(z.jsx)(J.a.Control,{type:"text",placeholder:"Enter Name",value:a,onChange:function(e){return r(e.target.value)}})]}),Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Image"}),Object(z.jsx)(ke,{value:o,onChange:j})]}),Object(z.jsx)(G.a,{variant:"standard",block:!0,onClick:u,children:"Add"})]})},De=W.a.div(d||(d=Object(V.a)(["\n  margin-bottom: 20px;\n  cursor: pointer;\n  transition: all 0.2s;\n  :hover {\n    transform: scale(1.05);\n  }\n  > div {\n    background-size: cover;\n    height: 200px;\n    border-radius: 5px;\n  }\n  > p {\n    margin-top: 5px;\n    font-size: 20px;\n    font-weight: bold;\n  }\n"]))),Ae=W.a.div(b||(b=Object(V.a)(["\n  border: 1px dashed grey;\n  height: 200px;\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  cursor: pointer;\n  background-color: white;\n  :hover {\n    background-color: #fbfbfb;\n  }\n"]))),Ge=function(){var e=Object(O.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(O.useState)(!1),r=Object(w.a)(a,2),s=r[0],i=r[1],o=Object(O.useContext)(L),j=Object(f.g)(),l=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=o.token,C("/api/places",{token:n});case 2:(t=e.sent)&&c(t);case 4:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){return i(!1)};return Object(O.useEffect)((function(){l()}),[]),Object(z.jsxs)(U,{children:[Object(z.jsx)("h3",{children:"My Places"}),Object(z.jsx)(pe.a,{show:s,onHide:u,centered:!0,children:Object(z.jsx)(pe.a.Body,{children:Object(z.jsx)(Ie,{onDone:function(){l(),u()}})})}),Object(z.jsxs)(D.a,{children:[n.map((function(e){return Object(z.jsx)(A.a,{lg:4,children:Object(z.jsxs)(De,{onClick:function(){return j.push("/places/".concat(e.id))},children:[Object(z.jsx)("div",{style:{backgroundImage:"url(".concat(e.image,")")}}),Object(z.jsx)("p",{children:e.name})]})},e.id)})),Object(z.jsx)(A.a,{lg:4,children:Object(z.jsx)(Ae,{onClick:function(){return i(!0)},children:"Add new place"})})]})]})},Re=function(){var e=Object(O.useState)(""),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(O.useState)(""),r=Object(w.a)(a,2),s=r[0],i=r[1],o=Object(f.g)(),j=Object(O.useContext)(L);return Object(O.useEffect)((function(){j.token&&o.replace("/places")}),[o,j.token]),Object(z.jsx)(U,{children:Object(z.jsx)(D.a,{className:"justify-content-center",children:Object(z.jsx)(A.a,{lg:6,md:8,children:Object(z.jsx)(F.a,{children:Object(z.jsxs)(F.a.Body,{children:[Object(z.jsx)("h3",{className:"text-center",children:Object(z.jsx)("strong",{children:"REGISTER"})}),Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Username"}),Object(z.jsx)(J.a.Control,{type:"text",placeholder:"Enter Username",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(z.jsxs)(J.a.Group,{children:[Object(z.jsx)(J.a.Label,{children:"Password"}),Object(z.jsx)(J.a.Control,{type:"password",placeholder:"Enter Password",value:s,onChange:function(e){return i(e.target.value)}})]}),Object(z.jsx)(G.a,{variant:"standard",block:!0,onClick:function(){j.register(n,s,(function(){return o.replace("/places")}))},disabled:j.loading,children:j.login?Object(z.jsx)(Q.a,{variant:"standard",as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Register"})]})})})})})},Me=n(80),He=function(e){var t=e.children,n=Object(Me.a)(e,["children"]),c=Object(O.useContext)(L);return Object(z.jsx)(f.b,Object(K.a)(Object(K.a)({},n),{},{render:function(e){var n=e.location;return c.token?t:Object(z.jsx)(f.a,{to:{pathname:"/login",state:{from:n}}})}}))},Ue=function(){return Object(z.jsxs)(T,{children:[Object(z.jsx)(p.a,{children:Object(z.jsxs)(f.d,{children:[Object(z.jsx)(f.b,{exact:!0,path:"/",component:function(){return Object(z.jsx)(B,{})}}),Object(z.jsx)(f.b,{exact:!0,path:"/login",component:function(){return Object(z.jsx)(X,{})}}),Object(z.jsx)(f.b,{exact:!0,path:"/register",component:function(){return Object(z.jsx)(Re,{})}}),Object(z.jsx)(f.b,{exact:!0,path:"/menu/:id/:table",component:function(){return Object(z.jsx)(be,{})}}),Object(z.jsx)(He,{exact:!0,path:"/places/:id",children:Object(z.jsx)(qe,{})}),Object(z.jsx)(He,{exact:!0,path:"/places",children:Object(z.jsx)(Ge,{})}),Object(z.jsx)(He,{exact:!0,path:"/places/:id/orders",children:Object(z.jsx)(xe,{})})]})}),Object(z.jsx)(v.a,{position:"top-right",closeOnClick:!0,autoClose:3e3})]})};n(100),n(101),n(102);m.a.render(Object(z.jsx)(h.a.StrictMode,{children:Object(z.jsx)(Ue,{})}),document.getElementById("root"))}},[[103,1,2]]]);
//# sourceMappingURL=main.0cdd4bbd.chunk.js.map